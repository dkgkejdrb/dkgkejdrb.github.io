---
layout: single
title:  "리액트: 자습서 탐독"
categories: R&D
tag: [React.js]
toc: true 











---



## 4. 초기 코드 살펴보기

'틱택토' 게임을 리액트로 구현해볼 건데, 자습서에 주어지는 기본 틱택토의 기본 코드는 아래와 같다.

[index.js]

```react
class Square extends React.Component {
    render() {
      return (
        <button className="square">
          {/* TODO */}
        </button>
      );
    }
  }
  
  class Board extends React.Component {
    renderSquare(i) {
      return <Square />;
    }
  
    render() {
      const status = 'Next player: X';
  
      return (
        <div>
          <div className="status">{status}</div>
          <div className="board-row">
            {this.renderSquare(0)}
            {this.renderSquare(1)}
            {this.renderSquare(2)}
          </div>
          <div className="board-row">
            {this.renderSquare(3)}
            {this.renderSquare(4)}
            {this.renderSquare(5)}
          </div>
          <div className="board-row">
            {this.renderSquare(6)}
            {this.renderSquare(7)}
            {this.renderSquare(8)}
          </div>
        </div>
      );
    }
  }
  
  class Game extends React.Component {
    render() {
      return (
        <div className="game">
          <div className="game-board">
            <Board />
          </div>
          <div className="game-info">
            <div>{/* status */}</div>
            <ol>{/* TODO */}</ol>
          </div>
        </div>
      );
    }
  }
  
  // ========================================
  
  const root = ReactDOM.createRoot(document.getElementById("root"));
  root.render(<Game />);
```



여기서 3개의 클래스를 볼 수 있는데, React에서는 이를 'React 컴포넌트'라고 한다.

컴포넌트는 React.Component를 상속받고 있는 javascript의 클래스 모양을 하고 있다.

Square는 button을 렌더링하고 Board는 사각형 9개를 렌더링하며, Game은 게임판을 렌더링하고 있다.









## 5. 부모 → 자식 컴포넌트로 props를 통해 데이터 전달하기

```react
class Square extends React.Component {
    render() {
      return (
        // 부모 컴포넌트로부터 props를 전달받아 버튼에 표시
        <button className="square">
          {this.props.value}
        </button>
      );
    }
  }
  
class Board extends React.Component {
    renderSquare(i) {
		// 자식 컴포넌트 Square에 value prop을 전달
		return <Square value={i} />;
    }
 ...
 }
```









## 6. 이벤트 리스너 등록하기

이벤트 리스터 등록 시, 화살표 함수형태를 사용하도록 하자. (단, function 함수일 때의 형태도 기억하도록 하자)

```react
class Square extends React.Component {
  render() {
    return (
	  // 클릭 이벤트 리스너 추가
      <button className="square" onClick={function() { console.log('click'); }}>
        {this.props.value}
      </button>
    );
  }
}

// <button className="square" onClick={() => console.log('click') }>
```











## 7. 컴포넌트 클래스의 생성자 설정하기

모든 React 컴포넌트 클래스는 생성자를 가질 때, super(props) 구문부터 작성해야 한다.

```react
class Square extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            value: null,
        };
    }
    ...
}
```



Square를 클릭할 때 현재 state 값을 표시하기 위해 render 함수를 변경한다.

Square의 render 함수 내부에서 onClick 핸들러를 통해 this.setState를 호출하는 것으로 React에게 button을 클릭할 때 Square가 다시 렌더링해야 한다고 알릴 수 있다.

클릭했을 때, Square의 this.state.value 는 'X' 가 되어 게임 판에서 X가 나타난다.

컴포넌트에서 setState를 호출하면 React는 자동으로 컴포넌트 내부의 자식 컴포넌트 역시 업데이트한다.

```react
class Square extends React.Component {
...
    render() {
      return (
        // 부모 컴포넌트(Board)로부터 props를 전달받아 버튼에 표시
        <button 
        className="square" 
        onClick={() => this.setState({value: 'X'})}
        >
            {this.state.value}
        </button>
      );
    }
  } 
```







## 8. 9개의 sqaure에 전달할 state 값을 부모 컴포넌트에서 관리하기

부모 컴포넌트(Board)는 props를 사용하여 자식 컴포넌트에 state를 다시 전달할 수 있다.

이러한 방식으로 컴포넌트끼리 또는 부모 컴포넌트와 동기화할 수 있게 한다.

state는 원래 자식 컴포넌트(Square)에 있었지만, 부모 컴포넌트(Board)에서 props를 통해 state를 다시 전달하였는데, 이를 부모 컴포넌트로 끌어올렸다고 표현한다.

```react
  class Board extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            // 9개의 square에 전달할 state 값을 부모 컴포넌트(Board)에서 관리
            squares: Array(9).fill(null),
        }
    }
    ...
}
```





## 9. 다음 리서치할 내용

[[State 끌어올리기]](https://ko.reactjs.org/tutorial/tutorial.html#lifting-state-up)
