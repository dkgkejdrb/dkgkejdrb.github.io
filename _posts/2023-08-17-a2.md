---
layout: single
title:  "Node.js 백엔드 스터디(7) - 몽고DB 사용하기"
tag: [웹-Backend]
toc: true 


























---

## 몽고DB 에 대한 나의 경험

이 전에 나의 경험은 Next.js와 몽고DB로 애플코딩의 Next.js 강좌를 참고하여, 공부한 내용을 블로그에 기록하고, Azure에 배포했던 경험까지 있다.

아래는 이전에 수행했던 링크이며, 중복되는 내용 외에 새로 알게된 내용 위주로 정리하려고 한다.

- 몽고DB 를 다루었었던 이전의 [링크](https://dkgkejdrb.github.io/a11/)



### 1. 데이터베이스 기본 용어

#### 기초 용어

- 테이블: 특정 주제에 대한 행과 열로 이루어진 데이터의 모음.
- 로우(row): 관계형 데이터베이스의 테이블에서 단일 구조 데이터 항목을 의미. 레코드라고 부름.
- 컬럼(column): 관계형 데이터베이스의 테이블에서 특정한 자료의 값 혹은 테이블에서 열을 의미.
- 기본키(Primary Key): 프라이머리키는 중복된 값을 가질 수 없다.데이터를 식별하는 데 필요한 키.
- 외래키(Foreign Key): 두 테이블을 연결하는데 사용하는 키.
- RDB(관계형 데이터베이스): 모든 데이터를 2차원의 테이블에 저장. 서로 다른 테이블 간에 조인 혹은 외래키로 관계를 맺을 수 있음.
- 스키마(schema): 데이터베이스 테이블의 명세를 기술한 데이터. 예를 들어, user라는 테이블을 생성 시 해당 테이블에는 문자열 20자 user_name, 숫자 4자리 age 등.
- 모델(model): 데이터베이스의 특정 테이블과 테이블에 있는 컬럼들의 형태를 정의한 클래스. user 테이블에 대하여 모델을 만든다면 User 클래스를 만들고, 변수로 string UserName, int age를 선언.
- 컬랙션(collection): 컬렉션은 몽고DB에서 사용하는 용어이며, 도큐먼트의 집합을 컬렉션이라고 한다. 관계형 데이터베이스의 테이블과 동일한 의미로 사용.
- 조인(join): 두 개 이상의 테이블 또는 컬렉션을 조합하여 데이터를 보여주는 기법.
- 트랜잭션(transaction): 데이터 변경을 수행하는 작업 단위.



#### 알아두면 좋은 용어

- 클러스터(cluster): 데이터 처리량을 높일 목적으로 데이터를 여러 서버(샤드)에 저장하는 기법
- 샤드(shard): 큰 데이터베이스를 작은 단위로 분할하는 기능. 샤드를 사용하여 데이터를 작은 단위로 분할하여 노드(데이터를 가지고 있는 서버)에 분산시켜서 저장할 수 있다. 샤드를 사용하면 대규모 데이터베이스를 다루는 시스템에서 성능과 확장성을 향상시킬 수 있다.



### 몽고DB 연결하기

몽고디비 커넥션을 위해, 포털에 접속 Connect 메뉴를 통해 connection string을 아래와 같이 받아 Node 코드에서 실행한다.

```javascript
const { MongoClient, ServerApiVersion } = require('mongodb');

// 1. 몽고DB 연결 정보
const uri = "mongodb+srv://<username>:<password>@cluster0.vbpuhau.mongodb.net/?retryWrites=true&w=majority";

// 2. 몽고DB 클라이언트 객체 생성
const client = new MongoClient(uri, {
    serverApi: {
        version: ServerApiVersion.v1,
        strict: true,
        deprecationErrors: true,
    }
});

async function run() {
    try {
        // 3. 몽고DB 접속
        await client.connect();
        // 4. 연결 성공확인 위해 핑 1 보내기
        await client.db("admin").command({ ping: 1 });
        console.log("Pinged your deployment. You successfully connected to MongoDB!");
    } finally {
        // 5. 성공, 실패할 경우 연결 종료
        await client.close();
    }
}
run().catch(console.dir);

```

![image-20230817160306782](../../images/2023-08-17-a2/image-20230817160306782.png)





#### 몽고DB Connect를 위한, userName과 password 확인

아래 메뉴에서 user를 생성하거나 계정을 관리할 수 있다.

![image-20230817160623230](../../images/2023-08-17-a2/image-20230817160623230.png)









### 다음에 다루게 될 것

- 몽고DB 사용하기